function eCrypt(){this.init=null;this.submitForm=null;this.encryptValue=null;this.showModalPayment=null;this.initAmexEC=null}(function(n,t){function r(){if(!u){u=!0;for(var n=0;n<i.length;n++)i[n].fn.call(window,i[n].ctx);i=[]}}function e(){document.readyState==="complete"&&r()}n=n||"docReady";t=t||window;var i=[],u=!1,f=!1;t[n]=function(n,t){if(u){setTimeout(function(){n(t)},1);return}i.push({fn:n,ctx:t});document.readyState==="complete"?setTimeout(r,1):f||(document.addEventListener?(document.addEventListener("DOMContentLoaded",r,!1),window.addEventListener("load",r,!1)):(document.attachEvent("onreadystatechange",e),window.attachEvent("onload",r)),f=!0)}})("docReady",window),function(n){function ct(){function dt(){var n=st();return n?ot(n):!1}function gt(n,t){var i,r;if(typeof n=="number"&&n<1e4&&(n=n.toString()),typeof n!="string")throw new Error("The value to be encrypted must be a string type.");return i=null,t&&(i=d(t)),i||(i=b),i?(r=new p,r.setPublic(i,ft),"eCrypted:"+r.encrypt(n)):null}function ni(n,t){if(!i){var r=g("modal");r.src=ui(n);ct();i=t}return!1}function ti(n,t){var e,o,s,u,f;if(!r&&(r=t,e=document.getElementById("amex_ec").contentDocument,o=e==null?null:e.getElementById("amex-express-checkout"),o==null)){n.clientid||(n.clientid="2fd9737d-164e-4804-a7bc-8528b09d1ca3");var h=g("amexec"),i=h.contentDocument,c=n.btnDisplay=="custom"?' display_type="custom"':"";i.open();i.write();i.close();i.head.title="_amex_ec";s='<div id="amex-express-checkout"><\/div><amex:init client_id="'+n.clientid+'" theme="responsive" env="'+n.env+'"disable_btn="false" callback="AmexECCBRedirect" button_color="dark"'+c+'><\/amex:init><amex:buy encrypted_data="'+n.encData+'"><\/amex:buy><input id="EndPoint" name="EndPoint" type="hidden" value="'+n.endPoint+'">';i.body.innerHTML=s;u=document.createElement("script");u.type="text/javascript";u.text='function AmexECCBRedirect(e){var a="/AmexEC/Error?",t="auth_code=AUTHCODE&wallet_id=WALLETID&card_type=CARDTYPE&transaction_id=TRANSACTIONID&context_string=CONTEXTSTRING",s="error_code=ERRORCODE&transaction_id=TRANSACTIONID&context_string=CONTEXTSTRING&wallet_id=WALLETID",c=s.replace("ERRORCODE","UnknownError").replace("TRANSACTIONID","UnknownTransactionId").replace("CONTEXTSTRING","UnknownContextString").replace("WALLETID","UnknownWalletId");"auth_code"in e?(a="/AmexEC/Success?",c=t.replace("AUTHCODE",e.auth_code).replace("WALLETID",e.wallet_id).replace("CARDTYPE",e.card_type).replace("TRANSACTIONID",e.transaction_id).replace("CONTEXTSTRING",e.context_string)):"error_code"in e&&(c=s.replace("ERRORCODE",e.error_code).replace("TRANSACTIONID",e.transaction_id).replace("CONTEXTSTRING",e.context_string).replace("WALLETID",e.wallet_id));var n=""==document.getElementById("EndPoint").value?"":document.getElementById("EndPoint").value,r=""==n?window.location.hostname:n,o="https://localhost:44300"+a+c;switch(r){case"api-au.dev.sandbox.ewaypayments.com":o="https://dev.secure.ewaypayments.com/sharedpage"+a+c;break;case"dev.api.ewaypayments.com":o="https://dev.secure.ewaypayments.com/sharedpage"+a+c;break;case"dev.secure.ewaypayments.com":o="https://dev.secure.ewaypayments.com/sharedpage"+a+c;break;case"api.sandbox.ewaypayments.com":o="/staging-au/sharedpage/sharedpayment"==window.location.pathname?"https://api.sandbox.ewaypayments.com/staging-au/sharedpage"+a+c:"https://secure-au.sandbox.ewaypayments.com/sharedpage"+a+c;break;case"secure-au.sandbox.ewaypayments.com":o="https://secure-au.sandbox.ewaypayments.com/sharedpage"+a+c;break;case"staging.api.ewaypayments.com":o="https://staging.secure.ewaypayments.com/sharedpage"+a+c;break;case"staging.secure.ewaypayments.com":o="https://staging.secure.ewaypayments.com/sharedpage"+a+c;break;case"api.ewaypayments.com":o="https://secure.ewaypayments.com/sharedpage"+a+c;break;case"secure.ewaypayments.com":o="https://secure.ewaypayments.com/sharedpage"+a+c}location.replace(o)};';i.body.appendChild(u);f=document.createElement("script");f.type="text/javascript";f.src="https://icm.aexp-static.com/Internet/IMDC/US_en/RegisteredCard/IntlAmexExpressCheckout/js/AmexExpressCheckout.js";i.body.appendChild(f)}return!1}function et(n){n=n||window.event;var t=n.target||n.srcElement;return ot(t)}function ot(n){var i,t,r,u;try{for(i=new p,i.setPublic(b,ft),t=ar(n),t.id&&(t.id="EWAY_CLONED_"+t.id),formNode=0,formLength=t.length;formNode<formLength;formNode++)r=t[formNode].getAttribute(ut),r!=null?br(t[formNode],i):t[formNode].id&&(t[formNode].id="EWAY_ENCRYPTED_"+t[formNode].id);t.style.display="none";o.parentNode.appendChild(t);u=document.createElement("form");u.submit.apply(t)}catch(f){window.console||(window.console={});window.console.log||(window.console.log=function(){});console.log("Uh oh, something went wrong");console.log(f);console.log(f.message)}finally{return h=null,c=null,!1}}function st(){for(var i,t=document.getElementsByTagName("form"),n=0;n<t.length;n++)if(i=t[n].getAttribute(rt),i)return t[n];return null}function ht(){window.ewayPNVars||(window.ewayPNVars={endpoints:{X:"https://localhost:44300",Y:"http://rapid-shared-sa.sa.ewaylabs.cloud/sharedpage",T:"http://staging.secure.ewaypayments.com/sharedpage",U:"https://staging.secure-uk.ewaypayments.com/sharedpage",V:"http://api.sandbox.ewaypayments.com/staging-au/sharedpage",W:"https://api.sandbox.ewaypayments.com/staging-uk/sharedpage",A:"https://secure.ewaypayments.com/sharedpage",B:"https://secure-uk.ewaypayments.com/sharedpage",C:"https://secure-au.sandbox.ewaypayments.com/sharedpage",D:"https://secure-uk.sandbox.ewaypayments.com/sharedpage"},defaultEndpoint:"A",modalEndpoints:{production:"https://secure.ewaypayments.com/sharedpage",sandbox:"https://secure-au.sandbox.ewaypayments.com/sharedpage","production-uk":"https://secure-uk.ewaypayments.com/sharedpage","sandbox-uk":"https://secure-uk.sandbox.ewaypayments.com/sharedpage"}})}function u(n){return ht(),window.ewayPNVars[n]}function t(n,t){ht();window.ewayPNVars[n]=t;return}function ct(){var i=s.offsetWidth,n=s.style;t("saveMarginR",n.marginRight);t("saveMarginT",n.marginTop);t("saveOverflow",n.overflow);n.overflow="hidden";n.marginTop="0px";n.marginRight=(n.marginRight?"+=":"")+(s.offsetWidth-i)}function ii(){var f=s.offsetWidth,n=s.style,t=u("saveMarginR"),i=u("saveMarginT"),r=u("saveOverflow");n.marginRight=t?t:"";n.marginTop=i?i:"";n.overflow=r?r:""}function ri(n){var r=null,t,i;if(n&&n.match("epk-[0-9,A-F][A-Z][0-9,A-F]*")){var u=n.substr(4).replace(/[-,G-Z]/g,""),f=0,e=u.length,o=e%2;for(t=0;t<e;t++)i=parseInt(u.charAt(t),16),t%2==o&&(i*=2),i>15&&(i-=15),f+=i;r=f%16==0}return r}function lt(n,t){var r=u("endpoints"),i=null;return ri(n)&&(i=r[n.charAt(5)]),!i&&t&&(i=r[u("defaultEndpoint")]),i}function ui(n){var r=u("modalEndpoints"),t=null,i;return n&&n.sharedPaymentUrl?(t=n.sharedPaymentUrl,t=t.replace(/sharedpayment\?/,"sharedpayment?v=2&")+"&View=Modal"):n&&n.accessCode&&(i=n.endpoint?n.endpoint:"production",t=r[i.toLowerCase()],t||(t=i.replace(/\/$/,"")),t.match(/^http/)||(t="https://"+t),t+="/sharedpayment?v=2&AccessCode="+n.accessCode+"&View=Modal"),t}function fi(){for(var r,i,u=[],t=document.getElementsByTagName("script"),n=0;n<t.length;n++)i=t[n].getAttribute("class"),i&&i=="eway-paynow-button"&&(t[n].nextSibling&&t[n].nextSibling.className&&t[n].nextSibling.className.match(/eway-button/)||u.push(t[n]));for(r=document.getElementsByTagName("button"),n=0;n<r.length;n++)i=r[n].getAttribute("class"),i&&i=="eway-paynow-button"&&u.push(r[n]);return u}function e(n){return n&&it(n)?n:n&&n.previousSibling&&n.previousSibling.nodeName=="SCRIPT"&&n.previousSibling.getAttribute("class")=="eway-paynow-button"?n.previousSibling:null}function at(n){var t=n.src;return t.match(/sharedpage/i)?t.replace(/sharedpage.*/i,"sharedpage"):lt(w(n),!0)}function ei(n){for(var t=50;n&&n.nodeName!="FORM"&&t-->0;)n=n.parentNode;return n}function oi(n){var r=u("cssAdded"),i;r||(i=document.createElement("link"),i.type="text/css",i.rel="stylesheet",i.href=at(n)+"/assets/eway-1-1/css/eway-paynow.css",document.getElementsByTagName("head")[0].appendChild(i),t("cssAdded","1"))}function si(n,t){var i=document.createElement("input");i.type="hidden";i.name="EWAY_ACCESSCODE";i.value=t.replace(/ID:.*,AC:/,"");n.appendChild(i)}function hi(n){var t,u,r;if(window.ewayActivePayNowButton){var i=e(window.ewayActivePayNowButton),o=hr(i),s=a(i);if(window.ewayActivePayNowButton.className="eway-button processed",t=window.ewayActivePayNowButton.firstChild,u=window.ewayActivePayNowButton.firstChild?window.ewayActivePayNowButton.firstChild.firstChild:null,u&&(u.nodeValue="Processing Complete"),t&&(t.style.cssText="display: block; min-height:30px;",o&&(t.style.cssText+=" background: "+o),s&&(t.style.cssText+=" color: "+s)),window.ewayActivePayNowButton.onclick=null,k(window.ewayActivePayNowButton,"Your transaction has been accepted for processing. "+n.replace("ID:","Receipt Number:").replace(/,AC:.*/,"")),r=wt(i),r)window.location.href=r+(r.match(/\?/)?"&":"?")+"AccessCode="+n.replace(/ID:.*,AC:/,"");else{var i=e(window.ewayActivePayNowButton),f=ei(window.ewayActivePayNowButton),h=er(i);!f||h=="false"||h=="no"||(si(f,n),f.submit())}}}function ci(n){var t,i;if(window.ewayActivePayNowButton){var r=e(window.ewayActivePayNowButton),u=sr(r),f=a(r);window.ewayActivePayNowButton.className="eway-button error";t=window.ewayActivePayNowButton.firstChild;i=window.ewayActivePayNowButton.firstChild?window.ewayActivePayNowButton.firstChild.firstChild:null;i&&(i.nodeValue="Processing Error");t&&(t.style.cssText="display: block; min-height:30px;",u&&(t.style.cssText+=" background: "+u),f&&(t.style.cssText+=" color: "+f));window.ewayActivePayNowButton.onclick=null;k(window.ewayActivePayNowButton,"Unable to process Transaction. Error Message: "+n)}}function li(){if(window.ewayActivePayNowButton){window.ewayActivePayNowButton.className="eway-button processing";var n=window.ewayActivePayNowButton.firstChild?window.ewayActivePayNowButton.firstChild.firstChild:null;n&&(n.nodeValue="Loading Payment...")}}function ai(){if(window.ewayActivePayNowButton){window.ewayActivePayNowButton.className="eway-button";var n=window.ewayActivePayNowButton.firstChild?window.ewayActivePayNowButton.firstChild.firstChild:null;n&&(n.nodeValue=tt(e(window.ewayActivePayNowButton)))}}function vi(n){var t;if(window.ewayActivePayNowButton){var r=e(window.ewayActivePayNowButton),i=bt(r),u=a(r);window.ewayActivePayNowButton.className="eway-button disabled";window.ewayActivePayNowButton.style.cssText="visibility: visible;"+i?" background: "+i:"";t=window.ewayActivePayNowButton.firstChild;t&&(t.style.cssText="display: block; min-height:30px;",i&&(t.style.cssText+=" background: "+i),u&&(t.style.cssText+=" color: "+u));window.ewayActivePayNowButton.onclick=null;k(window.ewayActivePayNowButton,n)}}function vt(n,t,i,r){var f=document.createElement("button"),u,e;return f.style.cssText="visibility: visible;"+i?" background: "+i:"",f.className="eway-button",u=document.createElement("span"),u.style.cssText="display: block; min-height:30px;",i&&(u.style.cssText+=" background: "+i),r&&(u.style.cssText+=" color: "+r),e=document.createTextNode(t),u.appendChild(e),f.appendChild(u),n.parentNode.insertBefore(f,n.nextSibling),f}function k(n,t){var i=document.createElement("a"),r;i.setAttribute("data-tips",t);i.className="right-tip";r=document.createElement("img");r.src=at(e(n))+"/assets/eway-1-1/images/info-black.png";r.style.cssText="vertical-align: middle";i.appendChild(r);n.parentNode.insertBefore(i,window.ewayActivePayNowButton.nextSibling)}function g(n){var i=document.createElement("iframe"),r;switch(n){case"modal":i.id="eway-payment-window";i.setAttribute("allowTransparency","true");i.style.cssText="z-index: 9999; display: block; border: 0px none transparent; overflow-x: hidden; overflow-y: auto; visibility: hidden; margin: 0px; padding: 0px; -webkit-tap-highlight-color: transparent; position: absolute; left: 0px; top: "+di()+"px; width: 100%; height: 100%; background: transparent;";document.body.appendChild(i);t("FrameState","modal");i.onload=ki;break;case"amexec":i.style.cssText="border: 0px; width: 80%; height: 50%; display: none;";i.id="amex_ec";r=document.getElementById("amex_ec");r.parentNode.replaceChild(i,r);t("FrameState","amexec");i.onload=nt(8,"amex_ec")}return yi(),t("FrameLoad","pending"),i}function yi(){window.ewayListenerConnected||(window.addEventListener?addEventListener("message",yt,!1):attachEvent("onmessage",yt),window.ewayListenerConnected=!0)}function y(n){var t=document.getElementById(n);switch(n){case"eway-payment-window":t&&document.body.removeChild(t);ii();break;case"amex_ec":t&&t.parentNode.removeChild(t)}}function yt(n){try{if((n.origin.match(/ewaypayments.com/)||n.origin.match(/localhost:44300/)||n.origin.match(/ewaylabs.cloud$/))&&(n.data.match(/postrobot_message_request/i)||n.data.match(/fireAndForget/i)))return}catch(t){console.log(t);console.log(t.message)}i?bi(n):r&&(n.data.match(/amexec/g)||n.data.match(/error_code/g))?pi(n):wi(n)}function pi(n){var i="",u="";(n.origin.match(/ewaypayments.com/)||n.origin.match(/localhost:44300/)||n.origin.match(/ewaylabs.cloud$/))&&!n.data.match(/error_code/g)&&n.data.match(/amexec/g)&&n.data.length>6?(t("FrameLoad","ok"),i="Complete",u=""):(i="Error",u="Sorry we were unable to process the payment, please select an alternative payment method.",t("FrameLoad","error"),y("amex_ec"));r&&(r(i,u,n.data),r=null)}function wi(n){var t=e(window.ewayActivePayNowButton),i;t&&(n.data.match(/^LoadOK/i)||(i=w(t),(n.origin.match(/ewaypayments.com/)||n.origin.match(/localhost:44300/)||n.origin.match(/ewaylabs.cloud$/))&&(n.data=="Cancel"?ai():n.data.match(/^Error:/i)?ci(n.data.replace(/^Error:/,"")):hi(n.data),y("eway-payment-window"))))}function bi(n){if(n.origin.match(/ewaypayments.com/)||n.origin.match(/localhost:44300/)||n.origin.match(/ewaylabs.cloud$/))if(n.data.match(/^LoadOK/i))t("FrameLoad","ok");else{t("FrameLoad","ok");y("eway-payment-window");var r="Complete",u="",f="";n.data=="Cancel"?r="Cancel":n.data.match(/^Error:/i)?(r="Error",u=n.data.replace(/^Error:/,"")):f=n.data.match(/^ID:([0-9]*),AC:.*/)?n.data.match(/^ID:([0-9]*),AC:.*/)[1]:"";i&&(i(r,f,u),i=null)}}function ki(){var n=document.getElementById("eway-payment-window"),r;n&&(r=u("FrameState"),n.style.visibility="visible",r!="modal"&&(n.style.background="#FFF"),t("FrameState","result"),i&&nt(8,"eway-payment-window"))}function nt(n,t){var f=u("FrameLoad");n-->0&&f&&f=="pending"?setTimeout(nt,250,n):f&&f=="pending"&&(y(t),i&&(i("Error","","Error loading payment modal, Invalid or missing access code."),i=null),r&&(r("Error","","Error loading AmexEC button, Invalid or missing access code."),r=null))}function di(){var n=document.documentElement,t=document.body;return n&&n.scrollTop||t&&t.scrollTop||0}function gi(n){var r=w(n),i=lt(r),t;i?(t=vt(n,tt(n),or(n),a(n)),t.onclick=function(){window.ewayActivePayNowButton=t;li();var r=g("modal"),u=i+"/sharedpayment?PublicAPIKey="+w(n)+f("Amount",it(n))+f("Currency",pt(n))+f("InvoiceRef",nr(n))+f("Email",tr(n))+f("Phone",ir(n))+f("Edit",ur(n))+f("ResultUrl",wt(n))+f("InvoiceDesc",rr(n));return r.src=u,ct(),!1}):(t=vt(n,tt(n),bt(n),a(n)),window.ewayActivePayNowButton=t,vi("Configuration Error: Invalid or missing Public API Key"))}function tt(n){var t=fr(n);return t||(t="Pay Now"),t.match(/#amount#/i)||(t+=" (#amount#)"),t.replace(/#amount#/ig,cr(it(n)/100,pt(n)))}function f(n,t){return t?"&"+n+"="+encodeURIComponent(t):""}function it(n){return n.getAttribute("data-amount")}function pt(n){var t=n.getAttribute("data-currency");return t==undefined?"":t}function w(n){return n.getAttribute("data-publicapikey")}function w(n){return n.getAttribute("data-publicapikey")}function nr(n){return n.getAttribute("data-invoiceref")}function tr(n){return n.getAttribute("data-email")}function ir(n){return n.getAttribute("data-phone")}function rr(n){return n.getAttribute("data-invoicedescription")}function ur(n){return n.getAttribute("data-allowedit")}function wt(n){return n.getAttribute("data-resulturl")}function fr(n){return n?n.getAttribute("data-label"):null}function er(n){return!n||!n.getAttribute("data-submitform")?"true":n.getAttribute("data-submitform")}function or(n){return n.getAttribute("data-buttoncolor")}function sr(n){return n.getAttribute("data-buttonerrorcolor")}function hr(n){return n.getAttribute("data-buttonprocessedcolor")}function bt(n){return n.getAttribute("data-buttondisabledcolor")}function a(n){return n.getAttribute("data-buttontextcolor")}function cr(n,t){return(t=="GBP"?"Â£":"$$")+n.toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")}function lr(n){b=d(n.getAttribute(rt))}function ar(n){var t=n.cloneNode(!0);return vr(n,t),yr(n,t),pr(n,t),wr(n,t),t}function vr(n,t){for(var r=n.getElementsByTagName("Select"),u=t.getElementsByTagName("Select"),i=0;i<r.length;i++)u[i].selectedIndex=r[i].selectedIndex}function yr(n,t){for(var r=n.getElementsByTagName("TextArea"),u=t.getElementsByTagName("TextArea"),i=0;i<r.length;i++)u[i].value=r[i].value}function pr(n,t){for(var r=n.getElementsByTagName("input"),u=t.getElementsByTagName("input"),i=0;i<r.length;i++)(r[i].type==="checkbox"||r[i].type==="radio")&&(u[i].checked=r[i].checked,u[i].value=r[i].value)}function wr(n,t){h&&c&&(btn=document.createElement("input"),btn.type="hidden",btn.name=h,btn.value=c,t.appendChild(btn))}function br(n,t){n.id&&(n.id="EWAY_ENCRYPTED_"+n.id);n.name=n.getAttribute(ut);n.value="eCrypted:"+t.encrypt(n.value)}function kr(n){var t=n.onsubmit;n.onsubmit=typeof n.onsubmit!="function"?et:function(n){return t(n)?et(n):!1}}function kt(n){n.target?(h=n.target.name,c=n.target.value):(h=n.srcElement.name,c=n.srcElement.value)}function dr(n){for(var i=n.getElementsByTagName("input"),t=0;t<i.length;t++)i[t].type==="submit"&&(document.addEventListener?document.addEventListener("click",kt):document.attachEvent&&document.attachEvent("onclick",kt))}var rt="data-eway-encrypt-key",ut="data-eway-encrypt-name",i=null,r=null,h=null,c=null,b=null,ft=d("AQAB"),v=fi(),l,o,s;if(v.length>0)for(l=0;l<v.length;l++)oi(v[l]),gi(v[l]);else o=st(),o&&(lr(o),kr(o),dr(o));s=window.document.body;n.submitForm=dt;n.encryptValue=gt;n.showModalPayment=ni;n.initAmexEC=ti}function t(n,t,i){n!=null&&("number"==typeof n?this.fromNumber(n,t,i):t==null&&"string"!=typeof n?this.fromString(n,256):this.fromString(n,t))}function e(){return new t(null)}function lt(n,t,i,r,u,f){while(--f>=0){var e=t*this[n++]+i[r]+u;u=Math.floor(e/67108864);i[r++]=e&67108863}return u}function at(n,t,i,r,u,f){for(var o=t&32767,s=t>>15;--f>=0;){var e=this[n]&32767,h=this[n++]>>15,c=s*e+h*o;e=o*e+((c&32767)<<15)+i[r]+(u&1073741823);u=(e>>>30)+(c>>>15)+s*h+(u>>>30);i[r++]=e&1073741823}return u}function vt(n,t,i,r,u,f){for(var o=t&16383,s=t>>14;--f>=0;){var e=this[n]&16383,h=this[n++]>>14,c=s*e+h*o;e=o*e+((c&16383)<<14)+i[r]+u;u=(e>>28)+(c>>14)+s*h;i[r++]=e&268435455}return u}function o(n){return ft.charAt(n)}function yt(n,t){var i=y[n.charCodeAt(t)];return i==null?-1:i}function pt(n){for(var t=this.t-1;t>=0;--t)n[t]=this[t];n.t=this.t;n.s=this.s}function wt(n){this.t=1;this.s=n<0?-1:0;n>0?this[0]=n:n<-1?this[0]=n+this.DV:this.t=0}function et(n){var t=e();return t.fromInt(n),t}function bt(n,i){var u,f;if(i==16)u=4;else if(i==8)u=3;else if(i==256)u=8;else if(i==2)u=1;else if(i==32)u=5;else if(i==4)u=2;else{this.fromRadix(n,i);return}this.t=0;this.s=0;for(var e=n.length,o=!1,r=0;--e>=0;){if(f=u==8?n[e]&255:yt(n,e),f<0){n.charAt(e)=="-"&&(o=!0);continue}o=!1;r==0?this[this.t++]=f:r+u>this.DB?(this[this.t-1]|=(f&(1<<this.DB-r)-1)<<r,this[this.t++]=f>>this.DB-r):this[this.t-1]|=f<<r;r+=u;r>=this.DB&&(r-=this.DB)}u==8&&(n[0]&128)!=0&&(this.s=-1,r>0&&(this[this.t-1]|=(1<<this.DB-r)-1<<r));this.clamp();o&&t.ZERO.subTo(this,this)}function kt(){for(var n=this.s&this.DM;this.t>0&&this[this.t-1]==n;)--this.t}function dt(n){var t;if(this.s<0)return"-"+this.negate().toString(n);if(n==16)t=4;else if(n==8)t=3;else if(n==2)t=1;else if(n==32)t=5;else if(n==4)t=2;else return this.toRadix(n);var s=(1<<t)-1,u,f=!1,e="",r=this.t,i=this.DB-r*this.DB%t;if(r-->0)for(i<this.DB&&(u=this[r]>>i)>0&&(f=!0,e=o(u));r>=0;)i<t?u=(this[r]&(1<<i)-1)<<t-i|this[--r]>>(i+=this.DB-t):(u=this[r]>>(i-=t)&s,i<=0&&(i+=this.DB,--r)),u>0&&(f=!0),f&&(e+=o(u));return f?e:"0"}function gt(){var n=e();return t.ZERO.subTo(this,n),n}function ni(){return this.s<0?this.negate():this}function ti(n){var t=this.s-n.s,i;if(t!=0)return t;if(i=this.t,t=i-n.t,t!=0)return this.s<0?-t:t;while(--i>=0)if((t=this[i]-n[i])!=0)return t;return 0}function g(n){var i=1,t;return(t=n>>>16)!=0&&(n=t,i+=16),(t=n>>8)!=0&&(n=t,i+=8),(t=n>>4)!=0&&(n=t,i+=4),(t=n>>2)!=0&&(n=t,i+=2),(t=n>>1)!=0&&(n=t,i+=1),i}function ii(){return this.t<=0?0:this.DB*(this.t-1)+g(this[this.t-1]^this.s&this.DM)}function ri(n,t){for(var i=this.t-1;i>=0;--i)t[i+n]=this[i];for(i=n-1;i>=0;--i)t[i]=0;t.t=this.t+n;t.s=this.s}function ui(n,t){for(var i=n;i<this.t;++i)t[i-n]=this[i];t.t=Math.max(this.t-n,0);t.s=this.s}function fi(n,t){for(var u=n%this.DB,e=this.DB-u,o=(1<<e)-1,r=Math.floor(n/this.DB),f=this.s<<u&this.DM,i=this.t-1;i>=0;--i)t[i+r+1]=this[i]>>e|f,f=(this[i]&o)<<u;for(i=r-1;i>=0;--i)t[i]=0;t[r]=f;t.t=this.t+r+1;t.s=this.s;t.clamp()}function ei(n,t){var i,r;if(t.s=this.s,i=Math.floor(n/this.DB),i>=this.t){t.t=0;return}var u=n%this.DB,f=this.DB-u,e=(1<<u)-1;for(t[0]=this[i]>>u,r=i+1;r<this.t;++r)t[r-i-1]|=(this[r]&e)<<f,t[r-i]=this[r]>>u;u>0&&(t[this.t-i-1]|=(this.s&e)<<f);t.t=this.t-i;t.clamp()}function oi(n,t){for(var r=0,i=0,u=Math.min(n.t,this.t);r<u;)i+=this[r]-n[r],t[r++]=i&this.DM,i>>=this.DB;if(n.t<this.t){for(i-=n.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<n.t;)i-=n[r],t[r++]=i&this.DM,i>>=this.DB;i-=n.s}t.s=i<0?-1:0;i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i);t.t=r;t.clamp()}function si(n,i){var u=this.abs(),f=n.abs(),r=u.t;for(i.t=r+f.t;--r>=0;)i[r]=0;for(r=0;r<f.t;++r)i[r+u.t]=u.am(0,f[r],i,r,0,u.t);i.s=0;i.clamp();this.s!=n.s&&t.ZERO.subTo(i,i)}function hi(n){for(var i=this.abs(),t=n.t=2*i.t,r;--t>=0;)n[t]=0;for(t=0;t<i.t-1;++t)r=i.am(t,i[t],n,2*t,0,1),(n[t+i.t]+=i.am(t+1,2*i[t],n,2*t+1,r,i.t-t-1))>=i.DV&&(n[t+i.t]-=i.DV,n[t+i.t+1]=1);n.t>0&&(n[n.t-1]+=i.am(t,i[t],n,2*t,0,1));n.s=0;n.clamp()}function ci(n,i,r){var s=n.abs(),l,f,a,y;if(!(s.t<=0)){if(l=this.abs(),l.t<s.t){i!=null&&i.fromInt(0);r!=null&&this.copyTo(r);return}r==null&&(r=e());var u=e(),p=this.s,b=n.s,c=this.DB-g(s[s.t-1]);if(c>0?(s.lShiftTo(c,u),l.lShiftTo(c,r)):(s.copyTo(u),l.copyTo(r)),f=u.t,a=u[f-1],a!=0){var w=a*(1<<this.F1)+(f>1?u[f-2]>>this.F2:0),k=this.FV/w,d=(1<<this.F1)/w,nt=1<<this.F2,h=r.t,v=h-f,o=i==null?e():i;for(u.dlShiftTo(v,o),r.compareTo(o)>=0&&(r[r.t++]=1,r.subTo(o,r)),t.ONE.dlShiftTo(f,o),o.subTo(u,u);u.t<f;)u[u.t++]=0;while(--v>=0)if(y=r[--h]==a?this.DM:Math.floor(r[h]*k+(r[h-1]+nt)*d),(r[h]+=u.am(0,y,r,v,0,f))<y)for(u.dlShiftTo(v,o),r.subTo(o,r);r[h]<--y;)r.subTo(o,r);i!=null&&(r.drShiftTo(f,i),p!=b&&t.ZERO.subTo(i,i));r.t=f;r.clamp();c>0&&r.rShiftTo(c,r);p<0&&t.ZERO.subTo(r,r)}}}function li(n){var i=e();return this.abs().divRemTo(n,null,i),this.s<0&&i.compareTo(t.ZERO)>0&&n.subTo(i,i),i}function l(n){this.m=n}function ai(n){return n.s<0||n.compareTo(this.m)>=0?n.mod(this.m):n}function vi(n){return n}function yi(n){n.divRemTo(this.m,null,n)}function pi(n,t,i){n.multiplyTo(t,i);this.reduce(i)}function wi(n,t){n.squareTo(t);this.reduce(t)}function bi(){var t,n;return this.t<1?0:(t=this[0],(t&1)==0)?0:(n=t&3,n=n*(2-(t&15)*n)&15,n=n*(2-(t&255)*n)&255,n=n*(2-((t&65535)*n&65535))&65535,n=n*(2-t*n%this.DV)%this.DV,n>0?this.DV-n:-n)}function a(n){this.m=n;this.mp=n.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<n.DB-15)-1;this.mt2=2*n.t}function ki(n){var i=e();return n.abs().dlShiftTo(this.m.t,i),i.divRemTo(this.m,null,i),n.s<0&&i.compareTo(t.ZERO)>0&&this.m.subTo(i,i),i}function di(n){var t=e();return n.copyTo(t),this.reduce(t),t}function gi(n){for(var i,t,r;n.t<=this.mt2;)n[n.t++]=0;for(i=0;i<this.m.t;++i)for(t=n[i]&32767,r=t*this.mpl+((t*this.mph+(n[i]>>15)*this.mpl&this.um)<<15)&n.DM,t=i+this.m.t,n[t]+=this.m.am(0,r,n,i,0,this.m.t);n[t]>=n.DV;)n[t]-=n.DV,n[++t]++;n.clamp();n.drShiftTo(this.m.t,n);n.compareTo(this.m)>=0&&n.subTo(this.m,n)}function nr(n,t){n.squareTo(t);this.reduce(t)}function tr(n,t,i){n.multiplyTo(t,i);this.reduce(i)}function ir(){return(this.t>0?this[0]&1:this.s)==0}function rr(n,i){var s;if(n>4294967295||n<1)return t.ONE;var r=e(),u=e(),f=i.convert(this),o=g(n)-1;for(f.copyTo(r);--o>=0;)i.sqrTo(r,u),(n&1<<o)>0?i.mulTo(u,f,r):(s=r,r=u,u=s);return i.revert(r)}function ur(n,t){var i;return i=n<256||t.isEven()?new l(t):new a(t),this.exp(n,i)}function nt(){this.i=0;this.j=0;this.S=[]}function fr(n){for(var i,r,t=0;t<256;++t)this.S[t]=t;for(i=0,t=0;t<256;++t)i=i+this.S[t]+n[t%n.length]&255,r=this.S[t],this.S[t]=this.S[i],this.S[i]=r;this.i=0;this.j=0}function er(){var n;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,n=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=n,this.S[n+this.S[this.i]&255]}function or(){return new nt}function sr(n){r[i++]^=n&255;r[i++]^=n>>8&255;r[i++]^=n>>16&255;r[i++]^=n>>24&255;i>=b&&(i-=b)}function ot(){sr((new Date).getTime())}function hr(){if(k==null){for(ot(),k=or(),k.init(r),i=0;i<r.length;++i)r[i]=0;i=0}return k.next()}function cr(n){for(var t=0;t<n.length;++t)n[t]=hr()}function st(){}function lr(n,i){return new t(n,i)}function ar(n,i){var r,e,u,o,f;if(i<n.length+11)return alert("Message too long for RSA"),null;for(r=[],e=n.length-1;e>=0&&i>0;)u=n.charCodeAt(e--),u<128?r[--i]=u:u>127&&u<2048?(r[--i]=u&63|128,r[--i]=u>>6|192):(r[--i]=u&63|128,r[--i]=u>>6&63|128,r[--i]=u>>12|224);for(r[--i]=0,o=new st,f=[];i>2;){for(f[0]=0;f[0]==0;)o.nextBytes(f);r[--i]=f[0]}return r[--i]=2,r[--i]=0,new t(r)}function p(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function vr(n,t){n!=null&&t!=null&&n.length>0&&t.length>0?(this.n=lr(n,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")}function yr(n){return n.modPowInt(this.e,this.n)}function pr(n){var r=ar(n,this.n.bitLength()+7>>3),i,t;return r==null?null:(i=this.doPublic(r),i==null)?null:(t=i.toString(16),(t.length&1)==0?ht(t):ht("0"+t))}function ht(n){for(var i,r="",t=0;t+3<=n.length;t+=3)i=parseInt(n.substring(t,t+3),16),r+=h.charAt(i>>6)+h.charAt(i&63);for(t+1==n.length?(i=parseInt(n.substring(t,t+1),16),r+=h.charAt(i<<2)):t+2==n.length&&(i=parseInt(n.substring(t,t+2),16),r+=h.charAt(i>>2)+h.charAt((i&3)<<4));(r.length&3)>0;)r+=rt;return r}function d(n){for(var t="",i=0,r,u=0;u<n.length;++u){if(n.charAt(u)==rt)break;(v=h.indexOf(n.charAt(u)),v<0)||(i==0?(t+=o(v>>2),r=v&3,i=1):i==1?(t+=o(r<<2|v>>4),r=v&15,i=2):i==2?(t+=o(r),t+=o(v>>2),r=v&3,i=3):(t+=o(r<<2|v>>4),t+=o(v&15),i=0))}return i==1&&(t+=o(r<<2)),t}var s,ut=(0xdeadbeefcafe&16777215)==15715070,w,ft,y,c,u,b,k,r,i,f,tt,it,h,rt;for(ut&&navigator.appName=="Microsoft Internet Explorer"?(t.prototype.am=at,s=30):ut&&navigator.appName!="Netscape"?(t.prototype.am=lt,s=26):(t.prototype.am=vt,s=28),t.prototype.DB=s,t.prototype.DM=(1<<s)-1,t.prototype.DV=1<<s,w=52,t.prototype.FV=Math.pow(2,w),t.prototype.F1=w-s,t.prototype.F2=2*s-w,ft="0123456789abcdefghijklmnopqrstuvwxyz",y=[],c="0".charCodeAt(0),u=0;u<=9;++u)y[c++]=u;for(c="a".charCodeAt(0),u=10;u<36;++u)y[c++]=u;for(c="A".charCodeAt(0),u=10;u<36;++u)y[c++]=u;if(l.prototype.convert=ai,l.prototype.revert=vi,l.prototype.reduce=yi,l.prototype.mulTo=pi,l.prototype.sqrTo=wi,a.prototype.convert=ki,a.prototype.revert=di,a.prototype.reduce=gi,a.prototype.mulTo=tr,a.prototype.sqrTo=nr,t.prototype.copyTo=pt,t.prototype.fromInt=wt,t.prototype.fromString=bt,t.prototype.clamp=kt,t.prototype.dlShiftTo=ri,t.prototype.drShiftTo=ui,t.prototype.lShiftTo=fi,t.prototype.rShiftTo=ei,t.prototype.subTo=oi,t.prototype.multiplyTo=si,t.prototype.squareTo=hi,t.prototype.divRemTo=ci,t.prototype.invDigit=bi,t.prototype.isEven=ir,t.prototype.exp=rr,t.prototype.toString=dt,t.prototype.negate=gt,t.prototype.abs=ni,t.prototype.compareTo=ti,t.prototype.bitLength=ii,t.prototype.mod=li,t.prototype.modPowInt=ur,t.ZERO=et(0),t.ONE=et(1),nt.prototype.init=fr,nt.prototype.next=er,b=256,r==null){if(r=[],i=0,window.crypto&&window.crypto.getRandomValues)for(tt=new Uint8Array(32),window.crypto.getRandomValues(tt),f=0;f<32;++f)r[i++]=tt[f];if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto)for(it=window.crypto.random(32),f=0;f<it.length;++f)r[i++]=it.charCodeAt(f)&255;while(i<b)f=Math.floor(65536*Math.random()),r[i++]=f>>>8,r[i++]=f&255;i=0;ot()}st.prototype.nextBytes=cr;p.prototype.doPublic=yr;p.prototype.setPublic=vr;p.prototype.encrypt=pr;h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";rt="=";n.init=ct}(eCrypt);docReady(function(){eCrypt.init()});
//# sourceMappingURL=eCrypt.min.js.map